{% extends "base.html" %}

{% block sidebar %}
    <h4 class="mb-3">Активные чаты</h4>
    <ul class="list-group">
        {% for chat in chats %}
            <li class="list-group-item d-flex justify-content-between align-items-center {% if selected_chat and chat.id == selected_chat.id %}active{% endif %}">
                <a href="{% url 'chat:index_with_chat' chat.id %}" class="text-decoration-none {% if selected_chat and chat.id == selected_chat.id %}text-light{% else %}text-dark{% endif %}">
                    {{ chat.title }}
                </a>
                <form method="post" action="{% url 'chat:delete_chat' chat.id %}" style="display:inline;">
                    {% csrf_token %}
                    <button class="btn btn-danger btn-sm">Удалить</button>
                </form>
            </li>
        {% endfor %}
        <li class="list-group-item">
            <form method="post" action="{% url 'chat:create_chat' %}">
                {% csrf_token %}
                <input type="text" class="form-control mb-2" name="title" placeholder="Название нового чата" required>
                <button class="btn btn-success btn-sm text-light w-100">Создать новый чат</button>
            </form>
        </li>
    </ul>

    {% if user.is_authenticated %}
        <hr>
        <form method="post" action="{% url 'logout' %}">
            {% csrf_token %}
            <button type="submit" class="btn btn-danger btn-sm w-100">Выйти</button>
        </form>
    {% else %}
        <p class="mt-3">Вы не авторизованы.</p>
    {% endif %}
{% endblock %}
